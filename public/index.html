<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Raspberry Pi Camera</title>
</head>
<body>
    <img id="image" />
    <div id="modified"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io.connect('http://raspbmc:3000');

        function refreshImage() {
            document.getElementById('image').src = 'camera.jpg?' + new Date().getTime();
            document.getElementById('modified').innerHTML = 'Last modified: ' + new Date(data.time).toLocaleString();
        }

        socket.on('modified', function (data) {
            refreshImage();
        });

        refreshImage();
    </script>
</body>
</html>